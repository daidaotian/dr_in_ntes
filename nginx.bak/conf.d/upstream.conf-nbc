# -*- Mode: Nginx -*-

upstream chain_v1_backend {
    server 10.130.64.75:9999;
    server 10.122.78.79:9999;
    server 10.122.78.80:9999;
}

upstream bbc_v1_backend {
    server 10.122.78.79:13000;
    server 10.122.78.80:13000;
    keepalive 64;
    check interval=5000 rise=2 fall=3 timeout=3000 type=http default_down=false;
    check_http_send "HEAD /bbc/v1/health/status HTTP/1.0\r\nConnection: keep-alive\r\n\r\n";
    check_http_expect_alive http_2xx http_3xx;
}

upstream btm_v1_backend {
    server 10.122.78.175:8888;
    server 10.122.78.176:8888;
    server 10.122.78.177:8888;
    server 10.122.78.178:8888;
    server 10.122.78.201:8888;
    server 10.122.78.202:8888;
    server 10.122.78.203:8888;
    server 10.122.78.204:8888;
    keepalive 128;
    check interval=5000 rise=2 fall=3 timeout=3000 type=http default_down=false;
    check_http_send "HEAD /health/status HTTP/1.0\r\nConnection: keep-alive\r\n\r\n";
    check_http_expect_alive http_2xx http_3xx;
}

upstream bcm_v1_backend {
    server 10.122.78.196:9002;
    server 10.122.78.198:9002;
    server 10.122.78.199:9002;
    server 10.122.78.200:9002;
    server 10.122.78.205:9002;
    server 10.122.78.206:9002;
    server 10.122.78.207:9002;
    server 10.122.78.208:9002;
    server 10.122.78.133:9002;
    server 10.122.78.132:9002;
    server 10.122.78.131:9002;
    server 10.122.78.130:9002;
    server 10.122.78.129:9002;
    server 10.122.78.128:9002;
    server 10.122.78.127:9002;
    keepalive 128;
    check interval=5000 rise=2 fall=3 timeout=3000 type=http default_down=false;
    check_http_send "GET /health/status.do HTTP/1.0\r\nConnection: keep-alive\r\n\r\n";
    check_http_expect_alive http_2xx http_3xx;
}

upstream wallet_v1_backend {
    server 10.122.78.179:6688;
    server 10.122.78.180:6688;
    server 10.122.78.181:6688;
    server 10.122.78.182:6688;
    keepalive 64;
    check interval=5000 rise=2 fall=3 timeout=3000 type=http default_down=false;
    check_http_send "HEAD /health/status HTTP/1.0\r\nConnection: keep-alive\r\n\r\n";
    check_http_expect_alive http_2xx http_3xx;
}

upstream bsm_v1_backend {
    server 10.122.78.185:13000;
    server 10.122.78.186:13000;
    server 10.122.78.187:13000;
    server 10.122.78.188:13000;
    keepalive 64;
}

upstream bde_backend {
    server 10.122.78.189:13000;
    server 10.122.78.190:13000;
    server 10.122.78.191:13000;
    server 10.122.78.192:13000;
    check interval=5000 rise=2 fall=3 timeout=3000 type=http default_down=false;
    check_http_send "HEAD /health/status HTTP/1.0\r\nConnection: keep-alive\r\n\r\n";
    check_http_expect_alive http_2xx http_3xx;
    keepalive 64;
}
